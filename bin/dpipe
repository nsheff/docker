#!/bin/sh

# dpipe is for docker stuff that will run and then exit and don't need to live on.

IMAGE="$1"
shift  # Discard the first argument so we can use "$@"

docker run --rm -i \
	--user=`id -u` \
	--env="DISPLAY" \
	--env "GENOMES" \
	--volume ${HOME}:${HOME} \
	--volume ${EXTDATA}:${EXTDATA} \
	--volume="/etc/group:/etc/group:ro" \
	--volume="/etc/passwd:/etc/passwd:ro" \
	--volume="/etc/shadow:/etc/shadow:ro"  \
	--volume="/etc/sudoers.d:/etc/sudoers.d:ro" \
	--volume="/tmp/.X11-unix:/tmp/.X11-unix:rw" \
	--workdir="`pwd`" \
	${IMAGE} "$@"

